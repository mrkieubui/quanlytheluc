!function(t){t.fn.heavyTable=function(e){e=t.extend({startPosition:{x:1,y:1}},e),this.each(function(){var n=t(this).find("tbody"),i=e.startPosition.x,c=e.startPosition.y,d={y:n.find("tr").length,x:n.parent().find("th").length};function l(){content=n.find(".selected input").val(),n.find(".selected").html(content),n.find(".selected").toggleClass("selected")}function o(){return c>d.y&&(c=d.y),i>d.x&&(i=d.x),c<1&&(c=1),i<1&&(i=1),currentCell=n.find("tr:nth-child("+c+")").find("td:nth-child("+i+")"),content=currentCell.html(),currentCell.toggleClass("selected"),currentCell}function r(e){var n=t("<input>",{type:"text"}).val(e.html());e.html(n),n.focus()}n.find("td").click(function(){l(),i=n.find("td").index(this)%d.x+1,c=n.find("tr").index(t(this).parent())+1,r(o())}),t(document).keydown(function(t){if(13==t.keyCode)l(),r(o());else if(t.keyCode>=37&&t.keyCode<=40){switch(l(),t.keyCode){case 37:i--;break;case 38:c--;break;case 39:i++;break;case 40:c++}return o(),!1}})})}}(jQuery);