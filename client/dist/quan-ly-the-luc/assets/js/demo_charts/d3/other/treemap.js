var D3Treemap={init:function(){!function(){if("undefined"!=typeof d3){var t=document.getElementById("d3-treemap"),e=800;if(t){var n,r,i=d3.select(t),a=i.node().getBoundingClientRect().width,d=d3.scale.category20(),o=d3.scale.linear().range([0,a]),c=d3.scale.linear().range([0,e]),l=i.append("svg"),u=l.attr("width",a).attr("height",e).append("g").attr("transform","translate(.5,.5)").style("font-size",12).style("overflow","hidden").style("text-indent",2),s=d3.layout.treemap().round(!1).size([a,e]).sticky(!0).value(function(t){return t.size});function f(t){return t.size}function p(t){return 1}function y(t){var n=a/t.dx,i=e/t.dy;o.domain([t.x,t.x+t.dx]),c.domain([t.y,t.y+t.dy]);var d=u.selectAll(".d3-treemap-cell").transition().duration(500).attr("transform",function(t){return"translate("+o(t.x)+","+c(t.y)+")"});d.select("rect").attr("width",function(t){return n*t.dx-1}).attr("height",function(t){return i*t.dy-1}),d.select("text").attr("x",function(t){return n*t.dx/2}).attr("y",function(t){return i*t.dy/2}).style("opacity",function(t){return n*t.dx>t.width?1:0}),r=t,d3.event.stopPropagation()}function h(){a=i.node().getBoundingClientRect().width,l.attr("width",a),u.attr("width",a),o.range([0,a]),y(n)}d3.json("../../../../global_assets/demo_data/d3/other/treemap.json",function(t){r=n=t;var e=s.nodes(n).filter(function(t){return!t.children}),i=u.selectAll(".d3-treemap-cell").data(e).enter().append("g").attr("class","d3-treemap-cell").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).style("cursor","pointer").on("click",function(t){return y(r==t.parent?n:t.parent)});i.append("rect").attr("width",function(t){return t.dx-1}).attr("height",function(t){return t.dy-1}).style("fill",function(t,e){return d(e)}),i.append("text").attr("x",function(t){return t.dx/2}).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","middle").text(function(t){return t.name}).style("fill","#fff").style("opacity",function(t){return t.width=this.getComputedTextLength(),t.dx>t.width?1:0})}),d3.selectAll(".treemap-actions").on("change",function(){s.value("size"==this.value?f:p).nodes(n),y(r)}),d3.select(window).on("click",function(){y(n)}),d3.select(window).on("resize",h),d3.select(".sidebar-control").on("click",h)}}else console.warn("Warning - d3.min.js is not loaded.")}()}};document.addEventListener("DOMContentLoaded",function(){D3Treemap.init()});