var D3TreeCollapsible=function(){var t=function(){if("undefined"!=typeof d3){var t=document.getElementById("d3-tree-collapsible"),e=800;if(t){var n,r=d3.select(t),i={top:0,right:0,bottom:0,left:40},l=r.node().getBoundingClientRect().width-i.left-i.right,o=(e=e-i.top-i.bottom-5,0),a="#2196F3",d=r.append("svg"),c=d.attr("width",l+i.left+i.right).attr("height",e+i.top+i.bottom).append("g").attr("transform","translate("+i.left+","+i.top+")"),s=d3.layout.tree().size([e,l-180]),u=d3.svg.diagonal().projection(function(t){return[t.y,t.x]});function f(t){var y=d3.event&&d3.event.altKey?5e3:500,p=s.nodes(n).reverse(),g=c.selectAll(".d3-tree-node").data(p,function(t){return t.id||(t.id=++o)}),x=g.enter().append("g").attr("class","d3-tree-node").attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).on("click",function(t){h(t),f(t)});x.append("circle").attr("class","d3-line-circle").attr("r",1e-6).style("stroke",a).style("stroke-width",1.5).style("cursor","pointer").style("fill",function(t){return t._children&&a}),x.append("text").attr("class","d3-text").attr("x",function(t){return t.children||t._children?-10:10}).attr("dy",".35em").style("text-anchor",function(t){return t.children||t._children?"end":"start"}).style("font-size",12).style("fill-opacity",1e-6).text(function(t){return t.name});var v=g.transition().duration(y).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});v.select("circle").attr("r",4.5).style("fill",function(t){return t._children&&a}),v.select("text").style("fill-opacity",1);var m=g.exit().transition().duration(y).attr("transform",function(e){return"translate("+t.y+","+t.x+")"}).remove();m.select("circle").attr("r",1e-6),m.select("text").style("fill-opacity",1e-6);var k=c.selectAll(".d3-tree-link").data(s.links(p),function(t){return t.target.id});k.enter().insert("path","g").attr("class","d3-tree-link d3-line-connect").style("fill","none").style("stroke-width",1.5).attr("d",function(e){var n={x:t.x0,y:t.y0};return u({source:n,target:n})}).transition().duration(y).attr("d",u),k.transition().duration(y).attr("d",u),k.exit().transition().duration(y).attr("d",function(e){var n={x:t.x,y:t.y};return u({source:n,target:n})}).remove(),p.forEach(function(t){t.x0=t.x,t.y0=t.y}),window.addEventListener("resize",w);var _=document.querySelector(".sidebar-control");function w(){l=r.node().getBoundingClientRect().width-i.left-i.right,p=s.nodes(n),links=s.links(p),d.attr("width",l+i.left+i.right),c.attr("width",l+i.left+i.right),s.size([e,l-180]),u.projection(function(t){return[t.y,t.x]}),c.selectAll(".d3-tree-link").attr("d",u),c.selectAll(".d3-tree-node").attr("transform",function(t){return"translate("+t.y+","+t.x+")"})}_&&_.addEventListener("click",w)}function h(t){t.children?(t._children=t.children,t.children=null):(t.children=t._children,t._children=null)}d3.json("../../../../global_assets/demo_data/d3/tree/tree_data_collapsible.json",function(t,r){(n=r).x0=e/2,n.y0=0,n.children.forEach(function t(e){e.children&&(e.children.forEach(t),h(e))}),h(n.children[1]),h(n.children[1].children[2]),h(n.children[9]),h(n.children[9].children[0]),f(n)})}}else console.warn("Warning - d3.min.js is not loaded.")};return{init:function(){t()}}}();document.addEventListener("DOMContentLoaded",function(){D3TreeCollapsible.init()});