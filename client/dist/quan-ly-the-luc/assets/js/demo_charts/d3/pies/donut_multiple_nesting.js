var D3PieDonutMultipleNesting={init:function(){!function(){if("undefined"!=typeof d3){var t=document.getElementById("d3-donut-nesting");if(t){var e=d3.scale.category20c();d3.csv("../../../../global_assets/demo_data/d3/pies/pies_nesting.csv",function(n){var r=d3.nest().key(function(t){return t.origin}).entries(n),a=d3.select(t).selectAll("svg").data(r).enter().append("svg").attr("width",240).attr("height",240).append("g").attr("transform","translate(120,120)"),i=d3.svg.arc().innerRadius(55).outerRadius(110),d=d3.layout.pie().value(function(t){return+t.count}).sort(function(t,e){return e.count-t.count});a.append("text").attr("class","d3-text").attr("dy",".35em").style("text-anchor","middle").style("font-weight",500).text(function(t){return t.key});var s=a.selectAll("g").data(function(t){return d(t.values)}).enter().append("g").attr("class","d3-arc");s.append("path").attr("d",i).attr("class","d3-slice-border").style("fill",function(t){return e(t.data.carrier)}).append("title").text(function(t){return t.data.carrier+": "+t.data.count}),s.filter(function(t){return t.endAngle-t.startAngle>.2}).append("text").attr("dy",".35em").attr("transform",function(t){return"translate("+i.centroid(t)+")rotate("+function(t){var e=90*(t.startAngle+t.endAngle)/Math.PI-90;return e>90?e-180:e}(t)+")"}).style("fill","#fff").style("font-size",12).style("text-anchor","middle").text(function(t){return t.data.carrier})})}}else console.warn("Warning - d3.min.js is not loaded.")}()}};document.addEventListener("DOMContentLoaded",function(){D3PieDonutMultipleNesting.init()});