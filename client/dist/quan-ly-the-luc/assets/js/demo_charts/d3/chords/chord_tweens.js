var D3ChordTweens={init:function(){!function(){if("undefined"!=typeof d3){var t,e=document.getElementById("d3-chord-tweens");if(e){function n(t){var e=(t.endAngle-t.startAngle)/t.value;return d3.range(0,t.value,50).map(function(n,r){return{angle:n*e+t.startAngle,label:r%2?null:n}})}function r(t,e){return function(n,r){e.selectAll(".d3-chord path").filter(function(t){return t.source.index!=r&&t.target.index!=r}).transition().style("opacity",t)}}d3.chart=d3.chart||{},d3.chart.chord=function(t){var e,a={},d=.37*Math.min(400,400),o=1.1*d,c=d3.scale.category20(),i=d3.layout.chord().padding(.05).sortSubgroups(d3.descending),l=d3.svg.arc().innerRadius(d).outerRadius(o),s=d3.svg.chord().radius(d);return a.update=function(t){if(i.matrix()){var e={groups:i.groups(),chords:i.chords()};i.matrix(t),a.transition(e)}else i.matrix(t),a.render()},a.clear=function(){d3.select(t).selectAll("svg").remove()},a.transition=function(t){e.selectAll(".d3-chord-ticks").transition().duration(200).attr("opacity",0),e.selectAll(".d3-arc").data(i.groups).transition().duration(1500).attrTween("d",function(t,e){return function(n,r){return r=d3.interpolate(e.groups[r],n),function(e){return t(r(e))}}}(l,t)),e.selectAll(".d3-chord").selectAll("path").data(i.chords).transition().duration(1500).attrTween("d",function(t,e){return function(n,r){return r=d3.interpolate(e.chords[r],n),function(e){return t(r(e))}}}(s,t)),setTimeout(a.drawTicks,1100)},a.render=function(){a.clear(),(e=d3.select(t).append("svg").attr("width",400).attr("height",400).append("g").attr("transform","translate(200,200)")).append("g").selectAll(".d3-arc").data(i.groups).enter().append("path").attr("class","d3-arc").attr("d",l).style("fill",function(t){return c(t.index)}).style("stroke",function(t){return c(t.index)}).on("mouseover",r(.1,e)).on("mouseout",r(1,e)),e.append("g").attr("class","d3-chord").selectAll("path").data(i.chords).enter().append("path").style("fill",function(t){return c(t.target.index)}).attr("d",s).attr("class","d3-slice-border").style("stroke-width",1).style("fill-opacity",.7),a.drawTicks()},a.drawTicks=function(){e.selectAll(".d3-chord-ticks").remove();var t=e.append("g").attr("class","d3-chord-ticks d3-axis").attr("opacity",.1).selectAll("g").data(i.groups).enter().append("g").selectAll("g").data(n).enter().append("g").attr("transform",function(t){return"rotate("+(180*t.angle/Math.PI-90)+")translate("+o+",0)"});t.append("line").attr("x1",1).attr("y1",0).attr("x2",5).attr("y2",0),t.append("text").attr("class","d3-text").attr("x",8).attr("dy",".35em").attr("text-anchor",function(t){return t.angle>Math.PI?"end":null}).attr("transform",function(t){return t.angle>Math.PI?"rotate(180)translate(-16)":null}).style("font-size",12).text(function(t){return t.label}),e.selectAll(".d3-chord-ticks").transition().duration(340).attr("opacity",1)},a},(t=d3.chart.chord(e)).update([[6,32,47,81,31,89,24,68,50,39],[37,83,57,80,87,7,85,7,68,17],[50,15,31,3,1,85,36,95,83,99],[77,2,87,41,93,52,6,42,11,76],[91,56,97,65,23,60,63,68,45,48],[97,50,79,52,85,31,85,21,79,44],[17,77,96,22,87,98,58,15,36,16],[44,54,60,69,36,44,76,58,50,16]]),d3.select("#update-tween").on("click",function(){var e=function(t){for(var e=[],n=0;n<8;n++){for(var r=[],a=0;a<8;a++){var d=Math.round(100*Math.pow(Math.random(),2)+1);r.push(d)}e.push(r)}return e}();t.update(e)}),d3.select("#clear-tween").on("click",function(){t.clear()}),d3.select("#render-tween").on("click",function(){t.render()})}}else console.warn("Warning - d3.min.js is not loaded.")}()}};document.addEventListener("DOMContentLoaded",function(){D3ChordTweens.init()});