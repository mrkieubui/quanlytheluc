var D3ChordUpdate={init:function(){!function(){if("undefined"!=typeof d3){var t,e=document.getElementById("d3-chord-charts");if(e){function n(t){var e=(t.endAngle-t.startAngle)/t.value;return d3.range(0,t.value,50).map(function(n,r){return{angle:n*e+t.startAngle,label:r%2?null:n}})}function r(t,e){return function(n,r){e.selectAll(".d3-chord path").filter(function(t){return t.source.index!=r&&t.target.index!=r}).transition().style("opacity",t)}}d3.chart=d3.chart||{},d3.chart.chord=function(t){var e={},a=.37*Math.min(400,400),d=1.1*a,l=d3.scale.category20c(),o=d3.layout.chord().padding(.05).sortSubgroups(d3.descending);return e.update=function(t){o.matrix(t),e.render()},e.clear=function(){d3.select(t).selectAll("svg").remove()},e.render=function(){e.clear();var c=d3.select(t).append("svg").attr("width",400).attr("height",400).append("g").attr("transform","translate(200,200)");c.append("g").selectAll("path").data(o.groups).enter().append("path").style("fill",function(t){return l(t.index)}).style("stroke",function(t){return l(t.index)}).attr("d",d3.svg.arc().innerRadius(a).outerRadius(d)).on("mouseover",r(.1,c)).on("mouseout",r(1,c));var i=c.append("g").attr("class","d3-axis").selectAll("g").data(o.groups).enter().append("g").selectAll("g").data(n).enter().append("g").attr("transform",function(t){return"rotate("+(180*t.angle/Math.PI-90)+")translate("+d+",0)"});i.append("line").attr("x1",1).attr("y1",0).attr("x2",5).attr("y2",0),i.append("text").attr("class","d3-text").attr("x",8).attr("dy",".35em").attr("text-anchor",function(t){return t.angle>Math.PI?"end":null}).attr("transform",function(t){return t.angle>Math.PI?"rotate(180)translate(-16)":null}).style("font-size",12).text(function(t){return t.label}),c.append("g").attr("class","d3-chord").selectAll("path").data(o.chords).enter().append("path").attr("class","d3-slice-border").attr("d",d3.svg.chord().radius(a)).style("fill",function(t){return l(t.target.index)}).style("stroke-width",1).style("fill-opacity",.7)},e},(t=d3.chart.chord(e)).update([[6,32,47,81,31,89,24,68,50,39],[37,83,57,80,87,7,85,7,68,17],[50,15,31,3,1,85,36,95,83,99],[37,25,37,81,72,98,32,13,70,25],[19,99,97,79,74,43,78,18,4,57],[77,2,87,41,93,52,6,42,11,76],[44,54,60,69,36,44,76,58,50,16]]),d3.select("#update-chart").on("click",function(){var e=function(t){for(var e=[],n=0;n<8;n++){for(var r=[],a=0;a<8;a++){var d=Math.round(100*Math.pow(Math.random(),2)+1);r.push(d)}e.push(r)}return e}();t.update(e)}),d3.select("#clear-chart").on("click",function(){t.clear()}),d3.select("#render-chart").on("click",function(){t.render()})}}else console.warn("Warning - d3.min.js is not loaded.")}()}};document.addEventListener("DOMContentLoaded",function(){D3ChordUpdate.init()});