var D3ChainedTransitions={init:function(){!function(){if("undefined"!=typeof d3){var t=document.getElementById("d3-chained-transitions"),e=400;if(t){var a=d3.select(t),n={top:5,right:90,bottom:20,left:40},r=a.node().getBoundingClientRect().width-n.left-n.right,i=(e=e-n.top-n.bottom-5,"New York");parseDate=d3.time.format("%Y%m%d").parse;var d=d3.time.scale().range([0,r]),l=d3.scale.linear().range([e,0]),s=d3.svg.axis().scale(d).orient("bottom").ticks(6).tickFormat(d3.time.format("%b")),o=d3.svg.axis().scale(l).orient("left"),c=a.append("svg"),m=c.attr("width",r+n.left+n.right).attr("height",e+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")"),f=d3.svg.line().interpolate("basis").x(function(t){return d(t.date)}).y(function(t){return l(t[i])});d3.tsv("http://demo.interface.club/limitless/demo/Template/global_assets/demo_data/d3/lines/lines_transitions.tsv",function(t,u){u.forEach(function(t){t.date=parseDate(t.date),t["New York"]=+t["New York"],t["San Francisco"]=+t["San Francisco"]}),d.domain([u[0].date,u[u.length-1].date]),l.domain(d3.extent(u,function(t){return t[i]})),m.append("path").datum(u).attr("d",f).attr("class","d3-line d3-line-medium").style("stroke","#b6a2de"),m.append("text").datum(u[u.length-1]).attr("class","d3-city d3-text").attr("transform",g).attr("x",3).attr("dy",".35em").text(i),m.append("g").attr("class","d3-axis d3-axis-horizontal").attr("transform","translate(0,"+e+")").call(s),m.append("g").attr("class","d3-axis d3-axis-vertical").call(o).append("text").attr("class","d3-axis-title").attr("transform","rotate(-90)").attr("y",10).attr("dy",".71em").style("text-anchor","end").text("Temperature (\xbaF)"),d3.selectAll(".d3-transitions-control").on("change",h);var p=setTimeout(function(){d3.select('input[value="San Francisco"]').property("checked",!0).each(h)},3e3);function h(){clearTimeout(p),i=this.value;var t=m.transition().duration(750);t.selectAll(".d3-line").attr("d",f),t.selectAll(".d3-city").attr("transform",g).text(i),l.domain(d3.extent(u,function(t){return t[i]}));var e=t.transition();e.selectAll(".d3-line").attr("d",f),e.selectAll(".d3-city").attr("transform",g),e.selectAll(".d3-axis-vertical").call(o)}function g(t){return"translate("+d(t.date)+","+l(t[i])+")"}window.addEventListener("resize",x);var v=document.querySelector(".sidebar-control");function x(){r=a.node().getBoundingClientRect().width-n.left-n.right,c.attr("width",r+n.left+n.right),m.attr("width",r+n.left+n.right),d.range([0,r]),m.selectAll(".d3-axis-horizontal").call(s),m.selectAll(".d3-line").attr("d",f),m.selectAll(".d3-city").attr("transform",g)}v&&v.addEventListener("click",x)})}}else console.warn("Warning - d3.min.js is not loaded.")}()}};document.addEventListener("DOMContentLoaded",function(){D3ChainedTransitions.init()});