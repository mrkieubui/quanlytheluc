var D3AreaMultiples={init:function(){!function(){if("undefined"!=typeof d3){var t=document.getElementById("d3-small-multiples"),e=100;if(t){var n=d3.select(t),a={top:5,right:10,bottom:5,left:10},r=n.node().getBoundingClientRect().width-a.left-a.right,l=(e=e-a.top-a.bottom-5,d3.time.format("%b %Y").parse),i=d3.time.scale().range([0,r]),d=d3.scale.linear().range([e,0]),o=d3.svg.area().interpolate("monotone").x(function(t){return i(t.date)}).y0(e).y1(function(t){return d(t.price)});d3.svg.line().x(function(t){return i(t.date)}).y(function(t){return d(t.price)}),d3.csv("../../../../global_assets/demo_data/d3/lines/lines_small_multiples.csv",function(t,s){s.forEach(function(t){t.price=+t.price,t.date=l(t.date)});var c=d3.nest().key(function(t){return t.symbol}).entries(s);c.forEach(function(t){t.maxPrice=d3.max(t.values,function(t){return t.price})}),i.domain([d3.min(c,function(t){return t.values[0].date}),d3.max(c,function(t){return t.values[t.values.length-1].date})]);var u=n.selectAll("svg").data(c).enter().append("svg").attr("class","d3-multiples").attr("width",r+a.left+a.right).attr("height",e+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")");u.append("path").attr("d",function(t){return d.domain([0,t.maxPrice]),o(t.values)}).attr("class","d3-area").style("fill","#66bb6a"),u.append("text").attr("class","d3-multiples-label").attr("x",r-8).attr("y",e-8).style("fill","#fff").style("text-anchor","end").style("text-weight",500).text(function(t){return t.key}),window.addEventListener("resize",m);var f=document.querySelector(".sidebar-control");function m(){r=n.node().getBoundingClientRect().width-a.left-a.right,d3.selectAll(".d3-multiples").attr("width",r+a.left+a.right),i.range([0,r]),u.selectAll(".d3-area").attr("d",function(t){return d.domain([0,t.maxPrice]),o(t.values)}),u.selectAll(".d3-multiples-label").attr("x",r-8)}f&&f.addEventListener("click",m)})}}else console.warn("Warning - d3.min.js is not loaded.")}()}};document.addEventListener("DOMContentLoaded",function(){D3AreaMultiples.init()});