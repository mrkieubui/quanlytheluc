var D3AreaStackedNest={init:function(){!function(){if("undefined"!=typeof d3){var t=document.getElementById("d3-area-stacked-nest"),e=400;if(t){var n=d3.select(t),a={top:5,right:20,bottom:20,left:40},r=n.node().getBoundingClientRect().width-a.left-a.right,d=(e=e-a.top-a.bottom-5,d3.time.format("%m/%d/%y")),i=d3.time.scale().range([0,r]),o=d3.scale.linear().range([e,0]),s=d3.scale.linear().domain([0,2]).range(["#75c476","#31a354"]),l=d3.svg.axis().scale(i).orient("bottom").ticks(d3.time.days),c=d3.svg.axis().scale(o).orient("left"),u=d3.select(t).append("svg"),f=u.attr("width",r+a.left+a.right).attr("height",e+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),g=d3.layout.stack().offset("zero").values(function(t){return t.values}).x(function(t){return t.date}).y(function(t){return t.value}),v=d3.nest().key(function(t){return t.key}),m=d3.svg.area().interpolate("basis").x(function(t){return i(t.date)}).y0(function(t){return o(t.y0)}).y1(function(t){return o(t.y0+t.y)});d3.csv("../../../../global_assets/demo_data/d3/lines/lines_stacked_nest.csv",function(t,n){n.forEach(function(t){t.date=d.parse(t.date),t.value=+t.value});var a=g(v.entries(n));i.domain(d3.extent(n,function(t){return t.date})),o.domain([0,d3.max(n,function(t){return t.y0+t.y})]),f.selectAll(".d3-area").data(a).enter().append("path").attr("class","d3-area d3-slice-border").attr("d",function(t){return m(t.values)}).style("fill",function(t,e){return s(e)}),f.append("g").attr("class","d3-axis d3-axis-horizontal").attr("transform","translate(0,"+e+")").call(l),f.append("g").attr("class","d3-axis d3-axis-vertical").call(c)}),window.addEventListener("resize",h);var p=document.querySelector(".sidebar-control");function h(){r=n.node().getBoundingClientRect().width-a.left-a.right,u.attr("width",r+a.left+a.right),f.attr("width",r+a.left+a.right),i.range([0,r]),f.selectAll(".d3-axis-horizontal").call(l),f.selectAll(".d3-area").attr("d",function(t){return m(t.values)})}p&&p.addEventListener("click",h)}}else console.warn("Warning - d3.min.js is not loaded.")}()}};document.addEventListener("DOMContentLoaded",function(){D3AreaStackedNest.init()});