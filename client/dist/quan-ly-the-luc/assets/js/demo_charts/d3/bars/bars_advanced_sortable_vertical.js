var D3BarSortableVertical={init:function(){!function(){if("undefined"!=typeof d3){var t=document.getElementById("d3-bar-sortable-vertical"),e=400;if(t){var n=d3.select(t),r={top:5,right:20,bottom:20,left:40},a=n.node().getBoundingClientRect().width-r.left-r.right,i=(e=e-r.top-r.bottom-5,d3.format(".0%")),o=d3.scale.category20c(),l=d3.scale.ordinal().rangeRoundBands([0,a],.1,1),d=d3.scale.linear().range([e,0]),c=d3.svg.axis().scale(l).orient("bottom"),s=d3.svg.axis().scale(d).orient("left").tickFormat(i),u=n.append("svg"),f=u.attr("width",a+r.left+r.right).attr("height",e+r.top+r.bottom).append("g").attr("transform","translate("+r.left+","+r.top+")");d3.tsv("http://demo.interface.club/limitless/demo/Template/global_assets/demo_data/d3/bars/bars_basic.tsv",function(t,n){n.forEach(function(t){t.frequency=+t.frequency}),l.domain(n.map(function(t){return t.letter})),d.domain([0,d3.max(n,function(t){return t.frequency})]),f.append("g").attr("class","d3-axis d3-axis-horizontal").attr("transform","translate(0,"+e+")").call(c),f.append("g").attr("class","d3-axis d3-axis-vertical").call(s).append("text").attr("class","d3-axis-title").attr("transform","rotate(-90)").attr("y",10).attr("dy",".71em").style("text-anchor","end").text("Frequency"),f.selectAll(".d3-bar").data(n).enter().append("rect").attr("class","d3-bar").attr("fill",function(t,e){return o(e)}).attr("x",function(t){return l(t.letter)}).attr("width",l.rangeBand()).attr("y",function(t){return d(t.frequency)}).attr("height",function(t){return e-d(t.frequency)}),d3.select(".toggle-sort").on("change",a);var r=setTimeout(function(){d3.select(".toggle-sort").property("checked",!0).each(a)},2e3);function a(){clearTimeout(r);var t=l.domain(n.sort(this.checked?function(t,e){return e.frequency-t.frequency}:function(t,e){return d3.ascending(t.letter,e.letter)}).map(function(t){return t.letter})).copy(),e=f.transition().duration(750),a=function(t,e){return 50*e};e.selectAll(".d3-bar").delay(a).attr("x",function(e){return t(e.letter)}),e.select(".d3-axis-horizontal").call(c).selectAll("g").delay(a)}}),window.addEventListener("resize",h);var g=document.querySelector(".sidebar-control");function h(){a=n.node().getBoundingClientRect().width-r.left-r.right,u.attr("width",a+r.left+r.right),f.attr("width",a+r.left+r.right),l.rangeRoundBands([0,a],.1,1),f.selectAll(".d3-axis-horizontal").call(c),f.selectAll(".d3-bar").attr("width",l.rangeBand()).attr("x",function(t){return l(t.letter)})}g&&g.addEventListener("click",h)}}else console.warn("Warning - d3.min.js is not loaded.")}()}};document.addEventListener("DOMContentLoaded",function(){D3BarSortableVertical.init()});