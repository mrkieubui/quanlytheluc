var D3BarInteraction={init:function(){!function(){if("undefined"!=typeof d3){var t=document.getElementById("d3-simple-interaction"),e=400;if(t){var n=d3.select(t),a={top:5,right:20,bottom:20,left:10},r=n.node().getBoundingClientRect().width-a.left-a.right,i=(e=e-a.top-a.bottom-5,[40.5,33.1,31.6,31,29.9,28.9,25.2,25.2,24.8,24.3,24,22.6,20.5,19.5,19,18.9,18.8,18.5,18.4,17.6,17.1]),o=d3.scale.category20(),l=d3.scale.ordinal().domain(d3.range(i.length)).rangeRoundBands([0,r],.05),d=d3.scale.linear().domain([0,d3.max(i)]).range([0,e]),c=d3.svg.axis().scale(l).orient("bottom"),u=n.append("svg"),s=u.attr("width",r+a.left+a.right).attr("height",e+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),f=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return t});s.call(f),s.selectAll(".d3-bar").data(i).enter().append("rect").attr("class","d3-bar").attr("x",function(t,e){return l(e)}).attr("width",l.rangeBand()).attr("height",0).attr("y",e).attr("fill",function(t,e){return o(e)}).style("cursor","pointer").on("mouseover",f.show).on("mouseout",f.hide).transition().delay(200).duration(1e3).attr("height",function(t){return d(t)}).attr("y",function(t){return e-d(t)}),s.selectAll(".value-label").data(i).enter().append("text").attr("class","value-label").attr("x",function(t,e){return l(e)+l.rangeBand()/2}).attr("y",function(t){return e-d(t)+25}).style("opacity",0).style("text-anchor","middle").style("fill","#fff").text(function(t){return t}).transition().delay(1e3).duration(500).style("opacity",1),c=d3.svg.axis().scale(l).orient("bottom"),d3.select(".toggle-dataset").on("change",function(){this.checked?(i=[8.4,12.1,25.5,10.3,11.7,10.9,13.3,23.1,15.4,12.3,17.8,18.8,14.7,8.8,11.2,10.2,17.1,14.5,11.9,7.3,7.4],s.selectAll("rect").data(i).transition().delay(0).duration(1e3).ease("cubic-in-out").attr("y",function(t){return e-d(t)}).attr("height",function(t){return d(t)}).style("fill",o),s.selectAll("text").data(i).attr("x",function(t,e){return l(e)+l.rangeBand()/2}).attr("y",function(t){return e-d(t)+25}).style("opacity",0).text(function(t){return t}).transition().delay(1e3).duration(500).style("opacity",1)):(i=[40.5,33.1,31.6,31,29.9,28.9,25.2,25.2,24.8,24.3,24,22.6,20.5,19.5,19,18.9,18.8,18.5,18.4,17.6,17.1],s.selectAll("rect").data(i).transition().delay(0).duration(1e3).ease("cubic-in-out").attr("y",function(t){return e-d(t)}).attr("height",function(t){return d(t)}).style("fill",function(t,e){return o(e)}),s.selectAll("text").data(i).attr("x",function(t,e){return l(e)+l.rangeBand()/2}).attr("y",function(t){return e-d(t)+25}).style("opacity",0).text(function(t){return t}).transition().delay(1e3).duration(500).style("opacity",1))}),window.addEventListener("resize",y);var g=document.querySelector(".sidebar-control");function y(){r=n.node().getBoundingClientRect().width-a.left-a.right,u.attr("width",r+a.left+a.right),s.attr("width",r+a.left+a.right),l.rangeRoundBands([0,r],.05),s.selectAll(".d3-axis-horizontal").call(c),s.selectAll(".d3-bar").attr("x",function(t,e){return l(e)}).attr("width",l.rangeBand()),s.selectAll(".value-label").attr("x",function(t,e){return l(e)+l.rangeBand()/2})}g&&g.addEventListener("click",y)}}else console.warn("Warning - d3.min.js is not loaded.")}()}};document.addEventListener("DOMContentLoaded",function(){D3BarInteraction.init()});