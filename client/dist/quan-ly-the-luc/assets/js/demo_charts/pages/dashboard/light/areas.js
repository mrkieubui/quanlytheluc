var DashboardAreas={init:function(){!function(t,e,a){if("undefined"!=typeof d3){if($(t).length>0){var n=d3.select(t),r={top:20,right:35,bottom:40,left:35},d=n.node().getBoundingClientRect().width-r.left-r.right,i=(e=e-r.top-r.bottom,d3.time.format("%Y-%m-%d").parse),o=d3.bisector(function(t){return t.date}).left,s=d3.time.format("%b %d"),l=n.append("svg"),c=l.attr("width",d+r.left+r.right).attr("height",e+r.top+r.bottom).append("g").attr("transform","translate("+r.left+","+r.top+")"),u=d3.svg.area().x(function(t){return f(t.date)}).y0(e).y1(function(t){return p(t.value)}).interpolate("monotone"),f=d3.time.scale().range([0,d]),p=d3.scale.linear().range([e,0]),m=d3.svg.axis().scale(f).orient("bottom").ticks(d3.time.days,6).innerTickSize(4).tickPadding(8).tickFormat(d3.time.format("%b %d"));d3.json("../../../../global_assets/demo_data/dashboard/monthly_sales.json",function(t,h){if(t)return console.error(t);h.forEach(function(t){t.date=i(t.date),t.value=+t.value});var g=d3.max(h,function(t){return t.value}),y=h.map(function(t){return{date:t.date,value:0}});f.domain(d3.extent(h,function(t,e){return t.date})),p.domain([0,d3.max(h,function(t){return t.value})]),c.append("g").attr("class","d3-axis d3-axis-horizontal").attr("transform","translate(0,"+e+")").call(m).selectAll(".d3-axis-subticks").data(f.ticks(d3.time.days),function(t){return t}).enter().append("line").attr("class","d3-axis-subticks").attr("y1",0).attr("y2",4).attr("x1",f).attr("x2",f),c.append("path").datum(h).attr("class","d3-area").attr("d",u).style("fill",a).transition().duration(1e3).attrTween("d",function(){var t=d3.interpolateArray(y,h);return function(e){return u(t(e))}});var v=c.append("g").style("display","none");v.append("line").attr("class","vertical-crosshair d3-crosshair-line").attr("y1",0).attr("y2",-g);var x=c.append("g").attr("class","d3-crosshair-pointer").style("display","none");x.append("circle").attr("class","d3-line-circle").attr("r",3).style("stroke",a).style("stroke-width",1.5);var w=c.append("g").attr("class","d3-crosshair-text").style("display","none");w.append("text").attr("class","d3-text").attr("dy",-10).style("font-size",12),c.append("rect").attr("class","d3-crosshair-overlay").style("fill","none").style("pointer-events","all").attr("width",d).attr("height",e).on("mouseover",function(){x.style("display",null),v.style("display",null),w.style("display",null)}).on("mouseout",function(){x.style("display","none"),v.style("display","none"),w.style("display","none")}).on("mousemove",function(){var t=d3.mouse(this)[0],a=f.invert(t),d=o(h,a),i=h[d-1],l=h[d],c=a-i.date>l.date-a?l:i;v.attr("transform","translate("+f(c.date)+","+e+")"),x.attr("transform","translate("+f(c.date)+","+p(c.value)+")"),t>=n.node().getBoundingClientRect().width-w.select("text").node().getBoundingClientRect().width-r.right-r.left?w.select("text").attr("text-anchor","end").attr("x",function(){return f(c.date)-15+"px"}).text(s(c.date)+" - "+c.value+" sales"):w.select("text").attr("text-anchor","start").attr("x",function(){return f(c.date)+15+"px"}).text(s(c.date)+" - "+c.value+" sales")}),window.addEventListener("resize",k);var b=document.querySelector(".sidebar-control");function k(){d=n.node().getBoundingClientRect().width-r.left-r.right,l.attr("width",d+r.left+r.right),c.attr("width",d+r.left+r.right),f.range([0,d]),c.selectAll(".d3-axis-horizontal").call(m),c.selectAll(".d3-axis-subticks").attr("x1",f).attr("x2",f),c.selectAll(".d3-area").datum(h).attr("d",u),c.selectAll(".d3-crosshair-overlay").attr("width",d)}b&&b.addEventListener("click",k)})}}else console.warn("Warning - d3.min.js is not loaded.")}("#monthly-sales-stats",100,"#4DB6AC"),function(t,e,a){if("undefined"!=typeof d3){if($(t).length>0){var n=d3.select(t),r={top:0,right:0,bottom:0,left:0},d=n.node().getBoundingClientRect().width-r.left-r.right,i=(e=e-r.top-r.bottom,d3.time.format("%Y-%m-%d").parse),o=n.append("svg"),s=o.attr("width",d+r.left+r.right).attr("height",e+r.top+r.bottom).append("g").attr("transform","translate("+r.left+","+r.top+")"),l=d3.svg.area().x(function(t){return c(t.date)}).y0(e).y1(function(t){return u(t.value)}).interpolate("monotone"),c=d3.time.scale().range([0,d]),u=d3.scale.linear().range([e,0]);d3.json("../../../../global_assets/demo_data/dashboard/monthly_sales.json",function(t,e){if(t)return console.error(t);e.forEach(function(t){t.date=i(t.date),t.value=+t.value}),d3.max(e,function(t){return t.value});var a=e.map(function(t){return{date:t.date,value:0}});c.domain(d3.extent(e,function(t,e){return t.date})),u.domain([0,d3.max(e,function(t){return t.value})]),s.append("path").datum(e).attr("class","d3-area").style("fill","#5C6BC0").attr("d",l).transition().duration(1e3).attrTween("d",function(){var t=d3.interpolateArray(a,e);return function(e){return l(t(e))}}),window.addEventListener("resize",p);var f=document.querySelector(".sidebar-control");function p(){d=n.node().getBoundingClientRect().width-r.left-r.right,o.attr("width",d+r.left+r.right),s.attr("width",d+r.left+r.right),c.range([0,d]),s.selectAll(".d3-area").datum(e).attr("d",l)}f&&f.addEventListener("click",p)})}}else console.warn("Warning - d3.min.js is not loaded.")}("#messages-stats",40)}};document.addEventListener("DOMContentLoaded",function(){DashboardAreas.init()});