!function(t){"use strict";function n(n,o){return t.map(n,function(t){return function(t,n){return t+".touchspin_"+n}(t,o)})}var o=0;t.fn.TouchSpin=function(s){if("destroy"!==s){var e={min:0,max:100,initval:"",replacementval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"glyphicon glyphicon-chevron-up",verticaldownclass:"glyphicon glyphicon-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-light",buttonup_class:"btn btn-light",buttondown_txt:"&ndash;",buttonup_txt:"&plus;"},a={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){function p(n){v=t.extend({},v,n),n.postfix&&D.parent().find(".bootstrap-touchspin-postfix").text(n.postfix),n.prefix&&D.parent().find(".bootstrap-touchspin-prefix").text(n.prefix)}function i(n){n.addClass("bootstrap-touchspin");var o=D.prev(),s=D.next(),e='<span class="input-group-prepend bootstrap-touchspin-prefix"><span class="input-group-text">'+v.prefix+"</span></span>",a='<span class="input-group-append bootstrap-touchspin-postfix"><span class="input-group-text">'+v.postfix+"</span></span>";o.hasClass("input-group-prepend")?o.append('<button class="'+v.buttondown_class+' bootstrap-touchspin-down" type="button">'+v.buttondown_txt+"</button>"):t('<span class="input-group-prepend"><button class="'+v.buttondown_class+' bootstrap-touchspin-down" type="button">'+v.buttondown_txt+"</button></span>").insertBefore(D),s.hasClass("input-group-append")?s.prepend('<button class="'+v.buttonup_class+' bootstrap-touchspin-up" type="button">'+v.buttonup_txt+"</button>"):t('<span class="input-group-append"><button class="'+v.buttonup_class+' bootstrap-touchspin-up" type="button">'+v.buttonup_txt+"</button></span>").insertAfter(D),t(e).insertBefore(D),t(a).insertAfter(D),x=n}function u(){x=t(v.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-prepend bootstrap-touchspin-prefix"><span class="input-group-text">'+v.prefix+'</span></span><span class="input-group-append bootstrap-touchspin-postfix"><span class="input-group-text">'+v.postfix+'</span></span><span class="input-group-append input-group-btn-vertical"><button class="'+v.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+v.verticalupclass+'"></i></button><button class="'+v.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+v.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-prepend"><button class="'+v.buttondown_class+' bootstrap-touchspin-down" type="button">'+v.buttondown_txt+'</button></span><span class="input-group-prepend bootstrap-touchspin-prefix"><span class="input-group-text">'+v.prefix+'</span></span><span class="input-group-append bootstrap-touchspin-postfix"><span class="input-group-text">'+v.postfix+'</span></span><span class="input-group-append"><button class="'+v.buttonup_class+' bootstrap-touchspin-up" type="button">'+v.buttonup_txt+"</button></span></div>").insertBefore(D),t(".bootstrap-touchspin-prefix",x).after(D),D.hasClass("form-control-sm")?x.addClass("input-group-sm"):D.hasClass("form-control-lg")&&x.addClass("input-group-lg")}function r(){var t,n,o;return""===(t=D.val())?void(""!==v.replacementval&&(D.val(v.replacementval),D.trigger("change"))):void(v.decimals>0&&"."===t||(n=parseFloat(t),isNaN(n)&&(n=""!==v.replacementval?v.replacementval:0),o=n,n.toString()!==t&&(o=n),n<v.min&&(o=v.min),n>v.max&&(o=v.max),o=function(t){switch(v.forcestepdivisibility){case"round":return(Math.round(t/v.step)*v.step).toFixed(v.decimals);case"floor":return(Math.floor(t/v.step)*v.step).toFixed(v.decimals);case"ceil":return(Math.ceil(t/v.step)*v.step).toFixed(v.decimals);default:return t}}(o),Number(t).toString()!==o.toString()&&(D.val(o),D.trigger("change"))))}function c(){if(v.booster){var t=Math.pow(2,Math.floor(F/v.boostat))*v.step;return v.maxboostedstep&&t>v.maxboostedstep&&(t=v.maxboostedstep,g=Math.round(g/t)*t),Math.max(v.step,t)}return v.step}function l(){r(),g=parseFloat(m.input.val()),isNaN(g)&&(g=0);var t=g,n=c();(g+=n)>v.max&&(g=v.max,D.trigger("touchspin.on.max"),b()),m.input.val(Number(g).toFixed(v.decimals)),t!==g&&D.trigger("change")}function d(){r(),g=parseFloat(m.input.val()),isNaN(g)&&(g=0);var t=g,n=c();(g-=n)<v.min&&(g=v.min,D.trigger("touchspin.on.min"),b()),m.input.val(g.toFixed(v.decimals)),t!==g&&D.trigger("change")}function f(){b(),F=0,M="down",D.trigger("touchspin.on.startspin"),D.trigger("touchspin.on.startdownspin"),_=setTimeout(function(){w=setInterval(function(){F++,d()},v.stepinterval)},v.stepintervaldelay)}function h(){b(),F=0,M="up",D.trigger("touchspin.on.startspin"),D.trigger("touchspin.on.startupspin"),C=setTimeout(function(){y=setInterval(function(){F++,l()},v.stepinterval)},v.stepintervaldelay)}function b(){switch(clearTimeout(_),clearTimeout(C),clearInterval(w),clearInterval(y),M){case"up":D.trigger("touchspin.on.stopupspin"),D.trigger("touchspin.on.stopspin");break;case"down":D.trigger("touchspin.on.stopdownspin"),D.trigger("touchspin.on.stopspin")}F=0,M=!1}var v,x,m,g,w,y,_,C,D=t(this),k=D.data(),F=0,M=!1;!function(){if(!D.data("alreadyinitialized")){if(D.data("alreadyinitialized",!0),D.data("spinnerid",o+=1),!D.is("input"))return void console.log("Must be an input.");""!==(v=t.extend({},e,k,function(){var n={};return t.each(a,function(t,o){var s="bts-"+o;D.is("[data-"+s+"]")&&(n[t]=D.data(s))}),n}(),s)).initval&&""===D.val()&&D.val(v.initval),r(),function(){var t=D.val(),n=D.parent();""!==t&&(t=Number(t).toFixed(v.decimals)),D.data("initvalue",t).val(t),D.addClass("form-control"),n.hasClass("input-group")?i(n):u()}(),m={down:t(".bootstrap-touchspin-down",x),up:t(".bootstrap-touchspin-up",x),input:t("input",x),prefix:t(".bootstrap-touchspin-prefix",x).addClass(v.prefix_extraclass),postfix:t(".bootstrap-touchspin-postfix",x).addClass(v.postfix_extraclass)},""===v.prefix&&m.prefix.addClass("d-none"),""===v.postfix&&m.postfix.addClass("d-none"),D.on("keydown",function(t){var n=t.keyCode||t.which;38===n?("up"!==M&&(l(),h()),t.preventDefault()):40===n&&("down"!==M&&(d(),f()),t.preventDefault())}),D.on("keyup",function(t){var n=t.keyCode||t.which;(38===n||40===n)&&b()}),D.on("blur",function(){r()}),m.down.on("keydown",function(t){var n=t.keyCode||t.which;(32===n||13===n)&&("down"!==M&&(d(),f()),t.preventDefault())}),m.down.on("keyup",function(t){var n=t.keyCode||t.which;(32===n||13===n)&&b()}),m.up.on("keydown",function(t){var n=t.keyCode||t.which;(32===n||13===n)&&("up"!==M&&(l(),h()),t.preventDefault())}),m.up.on("keyup",function(t){var n=t.keyCode||t.which;(32===n||13===n)&&b()}),m.down.on("mousedown.touchspin",function(t){m.down.off("touchstart.touchspin"),D.is(":disabled")||(d(),f(),t.preventDefault(),t.stopPropagation())}),m.down.on("touchstart.touchspin",function(t){m.down.off("mousedown.touchspin"),D.is(":disabled")||(d(),f(),t.preventDefault(),t.stopPropagation())}),m.up.on("mousedown.touchspin",function(t){m.up.off("touchstart.touchspin"),D.is(":disabled")||(l(),h(),t.preventDefault(),t.stopPropagation())}),m.up.on("touchstart.touchspin",function(t){m.up.off("mousedown.touchspin"),D.is(":disabled")||(l(),h(),t.preventDefault(),t.stopPropagation())}),m.up.on("mouseout touchleave touchend touchcancel",function(t){M&&(t.stopPropagation(),b())}),m.down.on("mouseout touchleave touchend touchcancel",function(t){M&&(t.stopPropagation(),b())}),m.down.on("mousemove touchmove",function(t){M&&(t.stopPropagation(),t.preventDefault())}),m.up.on("mousemove touchmove",function(t){M&&(t.stopPropagation(),t.preventDefault())}),t(document).on(n(["mouseup","touchend","touchcancel"],o).join(" "),function(t){M&&(t.preventDefault(),b())}),t(document).on(n(["mousemove","touchmove","scroll","scrollstart"],o).join(" "),function(t){M&&(t.preventDefault(),b())}),D.on("mousewheel DOMMouseScroll",function(t){if(v.mousewheel&&D.is(":focus")){var n=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail;t.stopPropagation(),t.preventDefault(),0>n?d():l()}}),D.on("touchspin.uponce",function(){b(),l()}),D.on("touchspin.downonce",function(){b(),d()}),D.on("touchspin.startupspin",function(){h()}),D.on("touchspin.startdownspin",function(){f()}),D.on("touchspin.stopspin",function(){b()}),D.on("touchspin.updatesettings",function(t,n){!function(t){p(t),r();var n=m.input.val();""!==n&&(n=Number(m.input.val()),m.input.val(n.toFixed(v.decimals)))}(n)}),m.input.css("display","block")}}()})}this.each(function(){var o=t(this).data();t(document).off(n(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],o.spinnerid).join(" "))})}}(jQuery);