!function(t,e){"function"==typeof define&&define.amd?define(["jQuery"],e):e("object"==typeof exports&&require("jQuery"))}(0,function(){var t=function(){var t={},e=new RegExp("{{([^}]+)}}","g"),s=function(t){for(var s,n=[];s=e.exec(t);)n.push(s);return n};return t.parse=function(t){for(var e={inpts:{},chars:{}},n=s(t),r=t.length,i=0,a=0,h=0,o=function(t){for(var s=t.length,n=0;s>n;n++)e.inpts[a]=t.charAt(n),a++;i++,h+=t.length+4-1};r>h;h++)i<n.length&&h===n[i].index?o(n[i][1]):e.chars[h-4*i]=t.charAt(h);return e.mLength=h-4*i,e},t}(),e=function(){var t={};return"undefined"!=typeof navigator&&navigator,t.extend=function(t){for(var e=1;e<arguments.length;e++)for(var s in arguments[e])t[s]=arguments[e][s];return t},t.addChars=function(t,e,s){return t.substr(0,s)+e+t.substr(s,t.length)},t.removeChars=function(t,e,s){return t.substr(0,e)+t.substr(s,t.length)},t.isBetween=function(t,e){return e.sort(function(t,e){return t-e}),t>e[0]&&t<e[1]},t.addListener=function(t,e,s){return void 0!==t.addEventListener?t.addEventListener(e,s,!1):t.attachEvent("on"+e,s)},t.preventDefault=function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1},t.getClip=function(t){return t.clipboardData?t.clipboardData.getData("Text"):window.clipboardData?window.clipboardData.getData("Text"):void 0},t.getMatchingKey=function(t,e,s){for(var n in s){var r=s[n];if(t===r.which&&e===r.keyCode)return n}},t.isDelKeyDown=function(e,s){return t.getMatchingKey(e,s,{backspace:{which:8,keyCode:8},delete:{which:46,keyCode:46}})},t.isDelKeyPress=function(e,s){return t.getMatchingKey(e,s,{backspace:{which:8,keyCode:8,shiftKey:!1},delete:{which:0,keyCode:46}})},t.isSpecialKeyPress=function(e,s){return t.getMatchingKey(e,s,{tab:{which:0,keyCode:9},enter:{which:13,keyCode:13},end:{which:0,keyCode:35},home:{which:0,keyCode:36},leftarrow:{which:0,keyCode:37},uparrow:{which:0,keyCode:38},rightarrow:{which:0,keyCode:39},downarrow:{which:0,keyCode:40},F5:{which:116,keyCode:116}})},t.isModifier=function(t){return t.ctrlKey||t.altKey||t.metaKey},t.forEach=function(t,e,s){if(t.hasOwnProperty("length"))for(var n=0,r=t.length;r>n&&!1!==e.call(s,t[n],n,t);n++);else for(var i in t)if(t.hasOwnProperty(i)&&!1===e.call(s,t[i],i,t))break},t}(),s=function(t,e){return function(s){var n=[],r=[];return e.forEach(s,function(s){e.forEach(s,function(e,s){var i=t.parse(e),a=function(t){return"*"===t?/.*/:new RegExp(t)}(s);return n.push(a),r.push(i),!1})}),{getPattern:function(t){var s;return e.forEach(n,function(e,n){return e.test(t)?(s=n,!1):void 0}),void 0===s?null:r[s]},patterns:r,matchers:n}}}(t,e),n={get:function(t){if("number"==typeof t.selectionStart)return{begin:t.selectionStart,end:t.selectionEnd};var e=document.selection.createRange();if(e&&e.parentElement()===t){var s=t.createTextRange(),n=t.createTextRange(),r=t.value.length;return s.moveToBookmark(e.getBookmark()),n.collapse(!1),s.compareEndPoints("StartToEnd",n)>-1?{begin:r,end:r}:{begin:-s.moveStart("character",-r),end:-s.moveEnd("character",-r)}}return{begin:0,end:0}},set:function(t,e){if("object"!=typeof e&&(e={begin:e,end:e}),t.setSelectionRange)t.focus(),t.setSelectionRange(e.begin,e.end);else if(t.createTextRange){var s=t.createTextRange();s.collapse(!0),s.moveEnd("character",e.end),s.moveStart("character",e.begin),s.select()}}},r=function(t,e,s){function n(e,n){var i=this;if(i.el=e,!i.el)throw new TypeError("Must provide an existing element");if(i.opts=s.extend({},r,n),void 0!==i.opts.pattern&&(i.opts.patterns=i._specFromSinglePattern(i.opts.pattern),delete i.opts.pattern),void 0===i.opts.patterns)throw new TypeError("Must provide a pattern or array of patterns");i.patternMatcher=t(i.opts.patterns),i._updatePattern(),i.hldrs={},i.focus=0,s.addListener(i.el,"keydown",function(t){i._keyDown(t)}),s.addListener(i.el,"keypress",function(t){i._keyPress(t)}),s.addListener(i.el,"paste",function(t){i._paste(t)}),i.opts.persistent&&(i._processKey("",!1),i.el.blur(),s.addListener(i.el,"focus",function(t){i._focus(t)}),s.addListener(i.el,"click",function(t){i._focus(t)}),s.addListener(i.el,"touchstart",function(t){i._focus(t)}))}var r={persistent:!1,repeat:!1,placeholder:" "},i={9:/[0-9]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/};return n.addInptType=function(t,e){i[t]=e},n.prototype.resetPattern=function(s){this.opts.patterns=s?this._specFromSinglePattern(s):this.opts.patterns,this.sel=e.get(this.el),this.val=this.el.value,this.delta=0,this._removeChars(),this.patternMatcher=t(this.opts.patterns);var n=this.patternMatcher.getPattern(this.val);this.mLength=n.mLength,this.chars=n.chars,this.inpts=n.inpts,this._processKey("",!1,!0)},n.prototype._updatePattern=function(){var t=this.patternMatcher.getPattern(this.val);t&&(this.mLength=t.mLength,this.chars=t.chars,this.inpts=t.inpts)},n.prototype._keyDown=function(t){var e=t.which||t.keyCode;return e&&s.isDelKeyDown(t.which,t.keyCode)?(this._processKey(null,e),s.preventDefault(t)):void 0},n.prototype._keyPress=function(t){var e,n;return e=t.which||t.keyCode,n=s.isSpecialKeyPress(t.which,t.keyCode),s.isDelKeyPress(t.which,t.keyCode)||n||s.isModifier(t)?void 0:(this._processKey(String.fromCharCode(e),!1),s.preventDefault(t))},n.prototype._paste=function(t){return this._processKey(s.getClip(t),!1),s.preventDefault(t)},n.prototype._focus=function(){var t=this;setTimeout(function(){var s=e.get(t.el);(s.end>t.focus||0===s.end)&&e.set(t.el,t.focus)},0)},n.prototype._processKey=function(t,n,r){if(this.sel=e.get(this.el),this.val=this.el.value,this.delta=0,this.sel.begin!==this.sel.end)this.delta=-1*Math.abs(this.sel.begin-this.sel.end),this.val=s.removeChars(this.val,this.sel.begin,this.sel.end);else if(n&&46===n)this._delete();else if(n&&this.sel.begin-1>=0)this.val=s.removeChars(this.val,this.sel.end-1,this.sel.end),this.delta-=1;else if(n)return!0;n||(this.val=s.addChars(this.val,t,this.sel.begin),this.delta+=t.length),this._formatValue(r)},n.prototype._delete=function(){for(;this.chars[this.sel.begin];)this._nextPos();this.sel.begin<this.val.length&&(this._nextPos(),this.val=s.removeChars(this.val,this.sel.end-1,this.sel.end),this.delta=-1)},n.prototype._nextPos=function(){this.sel.end++,this.sel.begin++},n.prototype._formatValue=function(t){this.newPos=this.sel.end+this.delta,this._removeChars(),this._updatePattern(),this._validateInpts(),this._addChars(),this.el.value=this.val.substr(0,this.mLength),(void 0===t||!1===t)&&e.set(this.el,this.newPos)},n.prototype._removeChars=function(){this.sel.end>this.focus&&(this.delta+=this.sel.end-this.focus);for(var t=0,e=0;e<=this.mLength;e++){var n,r=this.chars[e],i=this.hldrs[e],a=e+t;n=this.val.charAt(a=e>=this.sel.begin?a+this.delta:a),(r&&r===n||i&&i===n)&&(this.val=s.removeChars(this.val,a,a+1),t--)}this.hldrs={},this.focus=this.val.length},n.prototype._validateInpts=function(){for(var t=0;t<this.val.length;t++){var e=this.inpts[t],n=!i[e],r=!n&&!i[e].test(this.val.charAt(t));(n||r)&&this.inpts[t]&&(this.val=s.removeChars(this.val,t,t+1),this.focusStart--,this.newPos--,this.delta--,t--)}},n.prototype._addChars=function(){if(this.opts.persistent){for(var t=0;t<=this.mLength;t++)this.val.charAt(t)||(this.val=s.addChars(this.val,this.opts.placeholder,t),this.hldrs[t]=this.opts.placeholder),this._addChar(t);for(;this.chars[this.focus];)this.focus++}else for(var e=0;e<=this.val.length;e++){if(this.delta<=0&&e===this.focus)return!0;this._addChar(e)}},n.prototype._addChar=function(t){var e=this.chars[t];return!e||(s.isBetween(t,[this.sel.begin-1,this.newPos+1])&&(this.newPos++,this.delta++),t<=this.focus&&this.focus++,this.hldrs[t]&&(delete this.hldrs[t],this.hldrs[t+1]=this.opts.placeholder),void(this.val=s.addChars(this.val,e,t)))},n.prototype._specFromSinglePattern=function(t){return[{"*":t}]},n}(s,n,e),i="formatter";$.fn[i]=function(t){return"object"==typeof t&&this.each(function(){$.data(this,"plugin_"+i)||$.data(this,"plugin_"+i,new r(this,t))}),this.resetPattern=function(t){return this.each(function(){var e=$.data(this,"plugin_"+i);e&&e.resetPattern(t)}),this},this},$.fn[i].addInptType=function(t,e){r.addInptType(t,e)}});