!function(t){t.fn.priceFormat=function(r){return r=t.extend({prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1,clearOnEmpty:!1},r),this.each(function(){function n(t){f.is("input")?f.val(t):f.html(t)}function i(){return s=f.is("input")?f.val():f.html()}function e(t){for(var r="",n=0;n<t.length;n++)char_=t.charAt(n),0==r.length&&0==char_&&(char_=!1),char_&&char_.match(h)&&(_?r.length<_&&(r+=char_):r+=char_);return r}function a(r,n){if(!n&&(""===r||r==a("0",!0))&&y)return"";var i=function(t){for(;t.length<d+1;)t="0"+t;return t}(e(r)),c="",o=0;0==d&&(m="",u="");var u=i.substr(i.length-d,d),f=i.substr(0,i.length-d);if(i=0==d?f:f+m+u,v||""!=t.trim(v)){for(var s=f.length;s>0;s--)char_=f.substr(s-1,1),++o%3==0&&(char_=v+char_),c=char_+c;c.substr(0,1)==v&&(c=c.substring(1,c.length)),i=0==d?c:c+m+u}return!x||0==f&&0==u||(i=-1!=r.indexOf("-")&&r.indexOf("+")<r.indexOf("-")?"-"+i:S?"+"+i:""+i),l&&(i=l+i),p&&(i+=p),i}function c(){var t=i(),r=a(t);t!=r&&n(r),0==parseFloat(t)&&y&&n("")}function o(){""!=t.trim(l)&&g&&n(i().split(l)[1])}function u(){""!=t.trim(p)&&b&&n(i().split(p)[0])}var f=t(this),s="",h=/[0-9]/;s=f.is("input")?f.val():f.html();var l=r.prefix,p=r.suffix,m=r.centsSeparator,v=r.thousandsSeparator,_=r.limit,d=r.centsLimit,g=r.clearPrefix,b=r.clearSuffix,x=r.allowNegative,S=r.insertPlusSign,y=r.clearOnEmpty;S&&(x=!0),f.bind("keydown.price_format",function(t){var r=t.keyCode?t.keyCode:t.which,i=String.fromCharCode(r),e=!1,c=s,o=a(c+i);(r>=48&&r<=57||r>=96&&r<=105)&&(e=!0),8==r&&(e=!0),9==r&&(e=!0),13==r&&(e=!0),46==r&&(e=!0),37==r&&(e=!0),39==r&&(e=!0),!x||189!=r&&109!=r&&173!=r||(e=!0),!S||187!=r&&107!=r&&61!=r||(e=!0),e||(t.preventDefault(),t.stopPropagation(),c!=o&&n(o))}),f.bind("keyup.price_format",c),f.bind("focusout.price_format",c),g&&(f.bind("focusout.price_format",function(){o()}),f.bind("focusin.price_format",function(){f.val(l+i())})),b&&(f.bind("focusout.price_format",function(){u()}),f.bind("focusin.price_format",function(){f.val(i()+p)})),i().length>0&&(c(),o(),u())})},t.fn.unpriceFormat=function(){return t(this).unbind(".price_format")},t.fn.unmask=function(){var r,n="";for(var i in r=t(this).is("input")?t(this).val():t(this).html())isNaN(r[i])&&"-"!=r[i]||(n+=r[i]);return n}}(jQuery);