!function(n){function t(n,t){var o=new google.maps.Map(n,t),e=new google.maps.Marker({position:new google.maps.LatLng(54.19335,-3.92695),map:o,title:"Drag Me",draggable:t.draggable});return{map:o,marker:e,circle:null,location:e.position,radius:t.radius,locationName:t.locationName,settings:t.settings,domContainer:n,geodecoder:new google.maps.Geocoder}}var o={drawCircle:function(t,o,e,i){return null!=t.circle&&t.circle.setMap(null),e>0?(e*=1,(i=n.extend({strokeColor:"#0000FF",strokeOpacity:.35,strokeWeight:2,fillColor:"#0000FF",fillOpacity:.2},i)).map=t.map,i.radius=e,i.center=o,t.circle=new google.maps.Circle(i),t.circle):null},setPosition:function(n,t,o){n.location=t,n.marker.setPosition(t),n.map.panTo(t),this.drawCircle(n,t,n.radius,{}),n.settings.enableReverseGeocode?n.geodecoder.geocode({latLng:n.location},function(t,e){e==google.maps.GeocoderStatus.OK&&t.length>0&&(n.locationName=t[0].formatted_address),o&&o.call(this,n)}):o&&o.call(this,n)},locationFromLatLng:function(n){return{latitude:n.lat(),longitude:n.lng()}}};function e(n){return null!=i(n)}function i(t){return n(t).data("locationpicker")}function a(n,t){if(n){var e=o.locationFromLatLng(t.location);n.latitudeInput&&n.latitudeInput.val(e.latitude),n.longitudeInput&&n.longitudeInput.val(e.longitude),n.radiusInput&&n.radiusInput.val(t.radius),n.locationNameInput&&n.locationNameInput.val(t.locationName)}}n.fn.locationpicker=function(l,c){if("string"==typeof l){var u=this.get(0);if(!e(u))return;var r=i(u);switch(l){case"location":if(null==c){var s=o.locationFromLatLng(r.location);return s.radius=r.radius,s.name=r.locationName,s}c.radius&&(r.radius=c.radius),o.setPosition(r,new google.maps.LatLng(c.latitude,c.longitude),function(n){a(n.settings.inputBinding,n)});break;case"subscribe":if(null==l)return null;var g=c.event,d=c.callback;if(!g||!d)return console.error('LocationPicker: Invalid arguments for method "subscribe"'),null;google.maps.event.addListener(r.map,g,d)}return null}return this.each(function(){var i=n(this);if(!e(this)){var c=n.extend({},n.fn.locationpicker.defaults,l),u=new t(this,{zoom:c.zoom,center:new google.maps.LatLng(c.location.latitude,c.location.longitude),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,disableDoubleClickZoom:!1,scrollwheel:c.scrollwheel,streetViewControl:!1,radius:c.radius,locationName:c.locationName,settings:c,draggable:c.draggable});i.data("locationpicker",u),google.maps.event.addListener(u.marker,"dragend",function(n){o.setPosition(u,u.marker.position,function(n){var t=o.locationFromLatLng(u.location);n.settings.onchanged(t,n.radius,!0),a(u.settings.inputBinding,u)})}),o.setPosition(u,new google.maps.LatLng(c.location.latitude,c.location.longitude),function(n){a(c.inputBinding,u),n.settings.oninitialized(i)}),function(t,e){t&&(t.radiusInput&&t.radiusInput.on("change",function(){e.radius=n(this).val(),o.setPosition(e,e.location,function(n){n.settings.onchanged(o.locationFromLatLng(n.location),n.radius,!1)})}),t.locationNameInput&&e.settings.enableAutocomplete&&(e.autocomplete=new google.maps.places.Autocomplete(t.locationNameInput.get(0)),google.maps.event.addListener(e.autocomplete,"place_changed",function(){var n=e.autocomplete.getPlace();n.geometry?o.setPosition(e,n.geometry.location,function(n){a(t,n),n.settings.onchanged(o.locationFromLatLng(n.location),n.radius,!1)}):e.settings.onlocationnotfound(n.name)})),t.latitudeInput&&t.latitudeInput.on("change",function(){o.setPosition(e,new google.maps.LatLng(n(this).val(),e.location.lng()),function(n){n.settings.onchanged(o.locationFromLatLng(n.location),n.radius,!1)})}),t.longitudeInput&&t.longitudeInput.on("change",function(){o.setPosition(e,new google.maps.LatLng(e.location.lat(),n(this).val()),function(n){n.settings.onchanged(o.locationFromLatLng(n.location),n.radius,!1)})}))}(c.inputBinding,u)}})},n.fn.locationpicker.defaults={location:{latitude:40.7324319,longitude:-73.82480799999996},locationName:"",radius:500,zoom:15,scrollwheel:!0,inputBinding:{latitudeInput:null,longitudeInput:null,radiusInput:null,locationNameInput:null},enableAutocomplete:!1,enableReverseGeocode:!0,draggable:!0,onchanged:function(n,t,o){},onlocationnotfound:function(n){},oninitialized:function(n){}}}(jQuery);