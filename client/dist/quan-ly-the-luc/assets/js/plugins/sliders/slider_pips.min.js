!function(e){"use strict";var i={pips:function(i){function l(i){var l,s,t,a,n,r=[],p=0;if(o.values()&&o.values().length){for(t=o.values(),a=e.map(t,function(e){return Math.abs(e-i)}),n=Math.min.apply(Math,a),l=0;l<a.length;l++)a[l]===n&&r.push(l);for(p=r[0],s=0;s<r.length;s++)o._lastChangedValue===r[s]&&(p=r[s]);o.options.range&&2===r.length&&(i>t[1]?p=r[1]:i<t[0]&&(p=r[0]))}return p}function s(i){var l,s,a,n,r,p=i,d="ui-slider-pip",c=o.value(),v=o.values();if("first"===i?p=0:"last"===i&&(p=f),n=(a=u+o.options.step*p).toString().replace(".","-"),r=Math.round((p-u)/h.step),l="array"===e.type(h.labels)?h.labels[r]||"":"object"===e.type(h.labels)?"first"===i?h.labels.first||"":"last"===i?h.labels.last||"":"array"===e.type(h.labels.rest)?h.labels.rest[r-1]||"":a:a,"first"===i?(s="0%",d+=" ui-slider-pip-first",d+="label"===h.first?" ui-slider-pip-label":"",d+=!1===h.first?" ui-slider-pip-hide":""):"last"===i?(s="100%",d+=" ui-slider-pip-last",d+="label"===h.last?" ui-slider-pip-label":"",d+=!1===h.last?" ui-slider-pip-hide":""):(s=(100/f*i).toFixed(4)+"%",d+="label"===h.rest?" ui-slider-pip-label":"",d+=!1===h.rest?" ui-slider-pip-hide":""),d+=" ui-slider-pip-"+n,v&&v.length){for(t=0;t<v.length;t++)a===v[t]&&(d+=" ui-slider-pip-initial-"+(t+1),d+=" ui-slider-pip-selected-"+(t+1));o.options.range&&a>v[0]&&a<v[1]&&(d+=" ui-slider-pip-inrange")}else a===c&&(d+=" ui-slider-pip-initial",d+=" ui-slider-pip-selected"),o.options.range&&("min"===o.options.range&&c>a||"max"===o.options.range&&a>c)&&(d+=" ui-slider-pip-inrange");return'<span class="'+d+'" style="'+("horizontal"===o.options.orientation?"left: "+s:"bottom: "+s)+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+a+'">'+h.formatLabel(l)+"</span></span>"}var t,a,n,r,p,o=this,d="",u=o._valueMin(),f=(o._valueMax()-u)/o.options.step,c=o.element.find(".ui-slider-handle"),h={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:f>100?Math.floor(.05*f):1,formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===e.type(i)||"undefined"===e.type(i)){e.extend(h,i),o.element.data("pips-options",h),o.options.pipStep=Math.abs(Math.round(h.step))||1,o.element.off(".selectPip").addClass("ui-slider-pips").find(".ui-slider-pip").remove();var v={single:function(i){this.resetClasses(),p.filter(".ui-slider-pip-"+this.classLabel(i)).addClass("ui-slider-pip-selected"),o.options.range&&p.each(function(l,s){var t=e(s).children(".ui-slider-label").data("value");("min"===o.options.range&&i>t||"max"===o.options.range&&t>i)&&e(s).addClass("ui-slider-pip-inrange")})},range:function(i){for(this.resetClasses(),t=0;t<i.length;t++)p.filter(".ui-slider-pip-"+this.classLabel(i[t])).addClass("ui-slider-pip-selected-"+(t+1));o.options.range&&p.each(function(l,s){var t=e(s).children(".ui-slider-label").data("value");t>i[0]&&t<i[1]&&e(s).addClass("ui-slider-pip-inrange")})},classLabel:function(e){return e.toString().replace(".","-")},resetClasses:function(){var e=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;p.removeClass(function(i,l){return(l.match(e)||[]).join(" ")})}};for(d+=s("first"),n=o.options.pipStep;f>n;n+=o.options.pipStep)d+=s(n);for(d+=s("last"),o.element.append(d),p=o.element.find(".ui-slider-pip"),r=e._data(o.element.get(0),"events").mousedown&&e._data(o.element.get(0),"events").mousedown.length?e._data(o.element.get(0),"events").mousedown:o.element.data("mousedown-handlers"),o.element.data("mousedown-handlers",r.slice()),a=0;a<r.length;a++)"slider"===r[a].namespace&&o.element.data("mousedown-original",r[a].handler);o.element.off("mousedown.slider").on("mousedown.selectPip",function(i){var s=e(i.target),t=l(s.data("value")),a=c.eq(t);a.addClass("ui-state-active"),s.is(".ui-slider-label")?(function(i,s){if(!o.option("disabled")){var t=e(i).data("value"),a=l(t);o.values()&&o.values().length?o.options.values[a]=o._trimAlignValue(t):o.options.value=o._trimAlignValue(t),o._refreshValue(),o._change(s,a)}}(s,i),o.element.one("mouseup.selectPip",function(){a.removeClass("ui-state-active").focus()})):o.element.data("mousedown-original")(i)}),o.element.on("slide.selectPip slidechange.selectPip",function(i,l){var s=e(this),t=s.slider("value"),a=s.slider("values");l&&(t=l.value,a=l.values),o.values()&&o.values().length?v.range(a):v.single(t)})}else"destroy"===i?o.element.off(".selectPip").on("mousedown.slider",o.element.data("mousedown-original")).removeClass("ui-slider-pips").find(".ui-slider-pip").remove():"refresh"===i&&o.element.slider("pips",o.element.data("pips-options"))},float:function(i){function l(i){var l=[],r=e.map(i,function(e){return Math.ceil((e-a)/t.options.step)});if("array"===e.type(u.labels))for(s=0;s<i.length;s++)l[s]=u.labels[r[s]]||i[s];else if("object"===e.type(u.labels))for(s=0;s<i.length;s++)l[s]=i[s]===a?u.labels.first||a:i[s]===n?u.labels.last||n:"array"===e.type(u.labels.rest)&&u.labels.rest[r[s]-1]||i[s];else for(s=0;s<i.length;s++)l[s]=i[s];return l}var s,t=this,a=t._valueMin(),n=t._valueMax(),r=t._value(),p=t._values(),o=[],d=t.element.find(".ui-slider-handle"),u={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===e.type(i)||"undefined"===e.type(i)){if(e.extend(u,i),t.element.data("float-options",u),a>r&&(r=a),r>n&&(r=n),p&&p.length)for(s=0;s<p.length;s++)p[s]<a&&(p[s]=a),p[s]>n&&(p[s]=n);if(t.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),u.handle)for(o=l(t.values()&&t.values().length?p:[r]),s=0;s<o.length;s++)d.eq(s).append(e('<span class="ui-slider-tip">'+u.formatLabel(o[s])+"</span>"));u.pips&&t.element.find(".ui-slider-label").each(function(i,s){var t,a=e(s),n=[a.data("value")];t=u.formatLabel(l(n)[0]),e('<span class="ui-slider-tip-label">'+t+"</span>").insertAfter(a)}),"slide"!==u.event&&"slidechange"!==u.event&&"slide slidechange"!==u.event&&"slidechange slide"!==u.event&&(u.event="slidechange slide"),t.element.off(".sliderFloat").on(u.event+".sliderFloat",function(i,s){var t="array"===e.type(s.value)?s.value:[s.value],a=u.formatLabel(l(t)[0]);e(s.handle).find(".ui-slider-tip").html(a)})}else"destroy"===i?t.element.off(".sliderFloat").removeClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove():"refresh"===i&&t.element.slider("float",t.element.data("float-options"))}};e.extend(!0,e.ui.slider.prototype,i)}(jQuery);